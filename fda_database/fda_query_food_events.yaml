name: fda_query_food_events
description: |
  Query food adverse events from FDA's Center for Food Safety and Applied Nutrition (CFSAN).
  Access reports of adverse events related to foods, dietary supplements, and cosmetics.
  Useful for food safety surveillance, dietary supplement monitoring, and consumer
  complaint tracking.
  
  API Endpoint: https://api.fda.gov/food/event.json
  
  Key data fields returned:
  - report_number: Unique report identifier
  - date_created: Report creation date
  - date_started: When adverse event began
  - outcomes: Array of outcomes (Hospitalization, ER Visit, Death, etc.)
  - reactions: Array of adverse reactions
  - products.name_brand: Product brand name
  - products.industry_code: Industry code
  - products.industry_name: Industry category name
  - products.role: Product role (Suspect, Concomitant)
  - consumer.age: Consumer age
  - consumer.age_unit: Age unit (year, month)
  - consumer.gender: Consumer gender

  Product Categories (industry_name):
  - Bakery Products/Dough/Mixes/Icing
  - Beverages (coffee, tea, soft drinks)
  - Dietary Supplements
  - Ice Cream Products
  - Cosmetics
  - Vitamins and nutritional supplements

required_parameters: []

optional_parameters:
  - name: product_name
    type: string
    description: "Product brand name to search"
  - name: industry
    type: string
    description: "Industry category (e.g., 'Dietary Supplements', 'Beverages')"
  - name: outcome
    type: string
    description: "Filter by outcome (Hospitalization, Death, ER Visit)"
  - name: reaction
    type: string
    description: "Filter by reaction type"
  - name: limit
    type: integer
    description: "Maximum number of results to return"
    default: 100
  - name: sort
    type: string
    description: "Sort field (e.g., 'date_created:desc')"
  - name: api_key
    type: string
    description: "FDA API key for higher rate limits"

hardware_requirements:
  - "Internet connection required"
  - "No GPU required"
  - "Minimal RAM (< 1GB)"

time_complexity: "O(1) - API response typically < 5 seconds"

outputs:
  - name: results
    type: list
    description: "Array of food adverse event reports"
  - name: outcomes
    type: list
    description: "Array of outcomes (Hospitalization, Death, etc.)"
  - name: reactions
    type: list
    description: "Array of adverse reactions"

failure_modes:
  - condition: "No matching events"
    behavior: "Returns empty results"
  - condition: "Invalid industry name"
    behavior: "No results returned"

example_usage: |
  from scripts.fda_query import FDAQuery
  
  fda = FDAQuery(api_key="YOUR_API_KEY")
  
  # Query dietary supplement adverse events
  events = fda.query_food_events(industry="Dietary Supplements")
  
  # Search by product brand name
  product_events = fda.query_food_events(product_name="protein powder")
  
  # Find serious outcomes
  serious = fda.query("food", "event",
                     search="outcomes:Hospitalization",
                     limit=50)
  
  # Count most common reactions
  counts = fda.count_by_field(
      "food", "event",
      search="products.industry_name:*Beverages*",
      field="reactions.exact"
  )
